语言指导
====

[定义消息类型]()
[分层值类型]()
[可选值和默认值]()
[枚举]()
[使用其他消息类型]()
[嵌套类型]()
[更新消息类型]()
[拓展]()
[Oneof 字段]()
[Maps]()
[Packages]()
[定义服务]()
[选项]()
[生成一个类]()  

此文档将介绍如何使用protocol buffer来构造protobuf数据，包括`proto`文件的书写语法和生成数据访问类的方式。包括**proto2**版本。欲了解更多有关**proto3**的内容，请访问[Proto3语言指导]()。  

这是一个参考指南——对于许多功能，要想了解更多深入的示例，请参考所选语言的[教程]()。  

定义消息类型
====

首先来看一个非常简单的例子。假设要定义一个查询请求格式的消息，包括一个查询字符串，所查询的感兴趣页面，每一页中符合查询要求的结果数。下面是下面是代码：  

    message SearchRequest{
    	required string query = 1;
    	optional int32 page_number = 2;
    	optional int32 result_per_page =3;
    }
    
`SearchRequest`消息的定义指明了三个字段（键/值对），我们希望获得的数据就包含在这样类型的消息中。每个字段都有一个名字和一个类型。

## 指明字段类型
在上面的例子中，所有的字段都是标量类型：两个整型（`page_number`和`result_per_page`）和一个字符串（`query`）。同样的，也可以为字段指定符合类型，包括枚举和其它消息类型。

## 分配标签
如你所见，消息定义中的每个字段都有一个唯一的数字标签。这些标签用来识别在消息的二进制格式中定义的字段，并且一旦使用了这些标签，就不应该再改变它们。注意从1到15的标签只需要一个字节编码，包括识别序号和字段类型（可以在[Protocol Buffer编码]()中找到更多相关信息）。从16到2047的标签需要两个字节。所以我们应该将1到15的标签用于频繁使用的消息。同样的，也应该预留一些标签用于以后可能增加的情况。

可以指定的最小标签数字是1，可以指定的最大标签数字是2^29-1（536870911）。位于19000到19999的标签不可使用。（FieldDescriptor::kFirstReservedNumber到FieldDescriptor::kLastReserNumber），这些标签是供Protocol Buffers所使用的——当你在`proto`文件中使用这个区间内的标签时，protocol buffers编译器将会给出警告。同样的，你也不能使用预先定义保留标签。


## 指定字段规则


